---
title: "create_bootstrap_samples"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{create_bootstrap_samples}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

```


```{r setup }
library(boots.lmer)
```


This vignette contains a walk-through of `boots.lmer::boots.samples` function.


The `boots.samples` function produces a list of bootstrap samples, made especially for longitudinal data. Longitudinal data formatted where multiple observations should be chosen cautiously when sampling for boostrap:

1. sampling unit should be subject. That is, if one subject is chosen in the boostrap sample, the subject's entire observations should be included. 
2. the returning subject's name should be different if they were selected more than once, to use for random effects. 

Here's the example. The below example can be found in `help(boots.samples)` page as well.

<br>
<br>

# Generate example data

Here's an example data:
```{r}
set.seed(1020)
example.subject<-c("Sarah","John","Beth","Anna","Sarah","Sarah","Chris","Blake","John","Anna")
example.dat<-data.frame("Y"=rnorm(n=length(example.subject)),
                        "X1"=rpois(n=length(example.subject), lambda = 3),
                        "X2"=rnorm(n=length(example.subject)),
                        "X3"=rbeta(n=length(example.subject), shape1 = 3, shape2 = 0.5),
                        "subjects"=example.subject)
knitr::kable(example.dat, caption = "Table 1. Example data set.")
```

The example dataset contains total of 6 subjects (Sarah, John, Beth, Anna, Chris, and Blck), with some repeating observations from few subjects.



# Creating bootstrap samples using a longitudinal data


Here's `boots.samples` output, if we use `example.dat$subjects` as our subject ID to create 4 bootstrap samples.:


```{r}
output<-boots.samples(dat = example.dat, sub.id = "subjects",B=4)

output
# knitr::kable(output,caption = "Table 2. Four boostrap samples of example.dat data sets. The sampling unit is subject, hence the number of rows of each data set is expected to be different from one another.",row.names = FALSE)
```

The output is a list of 4, each list being a bootstrap sample data frame. Each data frame also contains a new column `no.repeat.sub.id`. This column is the same as `subject` column, except it has trailing `__#` where `#` shows the number of times the subject was included in the bootstrap sampling. 
For example, in the first bootstrap sampling, `John__1`, `John__2`, and `John__3` appear. Therefore, John was collected 3 times, and we can use `no.repeat.sub.id` for random effects to correctly take into account that there are three different Johns.
